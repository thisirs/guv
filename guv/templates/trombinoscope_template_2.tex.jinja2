% -*- mode: latex; -*-

\documentclass[a4paper,10pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[french]{babel}
\usepackage{geometry}
\geometry{hmargin=1cm,vmargin=1cm}
\usepackage{graphicx}
\usepackage{hyperref}

\pagestyle{empty}
\begin{document}

\begin{center}
  {\Large (((title | escape_tex)))} \vspace{1cm}
\end{center}

((* for group in data *))
((* if 'title' in group *)) \paragraph{((( group['title'] | escape_tex )))} ((* endif *))
((* for row in group['rows'] *))
\begin{center}
  \begin{tabular}{(((width)))}
    ((* for cell in row *))
    \includegraphics[width=.15\textwidth]{((( cell['photograph'] )))}
    ((* if loop.last *)) \\ ((* else *)) & ((* endif *))
    ((* endfor *))

    ((* for cell in row *))
    \begin{minipage}{.15\textwidth}
      \centering
      ((* if 'moodle_id' in cell *))
      \href{((( cell['link'] | format(moodle_id=cell['moodle_id']) )))}{((( cell['lastname']  | escape_tex )))} \\
      \href{((( cell['link'] | format(moodle_id=cell['moodle_id']) )))}{((( cell['name']  | escape_tex )))}
      ((* else *))
      ((( cell['lastname'] | escape_tex )))\\
      ((( cell['name'] | escape_tex )))
      ((* endif *))
    \end{minipage}
    ((* if loop.last *))\\((* else *)) & ((* endif *))
    ((* endfor *))
  \end{tabular}
\end{center}
((* endfor *))
((* endfor *))
\end{document}

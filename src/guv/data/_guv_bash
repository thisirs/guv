#!/usr/bin/env bash
# AUTOMATCALLY GENERATED by `shtab`

_shtab_guv_subparsers=('createsemester' 'createuv' 'doit' 'cal_inst' 'cal_uv' 'csv_create_groups' 'csv_exam_groups' 'csv_for_upload' 'csv_groups' 'csv_groups_groupings' 'csv_moodle_groups' 'fetch_group_id' 'html_inst' 'html_table' 'ical_inst' 'json_group' 'json_restriction' 'maggle_teams' 'pdf_attendance' 'pdf_attendance_full' 'pdf_trombinoscope' 'xls_affectation' 'xls_assignment_grade' 'xls_grade_book_group' 'xls_grade_book_jury' 'xls_grade_book_no_group' 'xls_merge_final_grade' 'xls_utp' 'yaml_qcm' 'zoom_breakout_rooms')

_shtab_guv_option_strings=('-h' '--help')
_shtab_guv_createsemester_option_strings=('-h' '--help' '--uv')
_shtab_guv_createuv_option_strings=('-h' '--help')
_shtab_guv_doit_option_strings=('-h' '--help')
_shtab_guv_cal_inst_option_strings=('-h' '--help' '-p' '--plannings' '-i' '--insts')
_shtab_guv_cal_uv_option_strings=('-h' '--help')
_shtab_guv_csv_create_groups_option_strings=('-h' '--help' '-G' '--grouping' '-n' '--num-groups' '-s' '--group-size' '-p' '--proportions' '-t' '--template' '-l' '--names' '-o' '--ordered' '-g' '--global' '-r' '--random' '--other-groups')
_shtab_guv_csv_exam_groups_option_strings=('-h' '--help' '-t' '--tiers-temps' '-p' '--tp')
_shtab_guv_csv_for_upload_option_strings=('-h' '--help' '-g' '--grade-colname' '--ects' '-c' '--comment-colname' '-f' '--format')
_shtab_guv_csv_groups_option_strings=('-h' '--help' '-g' '--groups')
_shtab_guv_csv_groups_groupings_option_strings=('-h' '--help' '-g' '-f' '-G' '-F')
_shtab_guv_csv_moodle_groups_option_strings=('-h' '--help' '-c' '--course' '-p' '--project' '-g' '--group-names' '-o' '--other-group')
_shtab_guv_fetch_group_id_option_strings=('-h' '--help')
_shtab_guv_html_inst_option_strings=('-h' '--help')
_shtab_guv_html_table_option_strings=('-h' '--help' '-c' '--courses' '-g' '--grouped' '-a' '--num-AB' '-n' '--names' '--header-row-format')
_shtab_guv_ical_inst_option_strings=('-h' '--help' '-p' '--plannings' '-i' '--insts')
_shtab_guv_json_group_option_strings=('-h' '--help' '-g' '--group')
_shtab_guv_json_restriction_option_strings=('-h' '--help' '-c' '--course' '-a' '--num-AB')
_shtab_guv_maggle_teams_option_strings=('-h' '--help')
_shtab_guv_pdf_attendance_option_strings=('-h' '--help' '-t' '--title' '-g' '--group' '-b' '--blank' '-c' '--count' '-n' '--names' '-e' '--extra' '--tiers-temps' '--save-tex')
_shtab_guv_pdf_attendance_full_option_strings=('-h' '--help' '-g' '--group' '-n' '--slots' '-t' '--template' '--save-tex')
_shtab_guv_pdf_trombinoscope_option_strings=('-h' '--help' '-g' '--group' '-s' '--subgroup' '--save-tex')
_shtab_guv_xls_affectation_option_strings=('-h' '--help')
_shtab_guv_xls_assignment_grade_option_strings=('-h' '--help' '-e' '--exam')
_shtab_guv_xls_grade_book_group_option_strings=('-h' '--help' '--name' '--marking-scheme' '-o' '--order-by' '-w' '--worksheets' '-g' '--group-by')
_shtab_guv_xls_grade_book_jury_option_strings=('-h' '--help' '--name' '--config')
_shtab_guv_xls_grade_book_no_group_option_strings=('-h' '--help' '--name' '--marking-scheme' '-o' '--order-by' '-w' '--worksheets')
_shtab_guv_xls_merge_final_grade_option_strings=('-h' '--help' '-e' '--exam')
_shtab_guv_xls_utp_option_strings=('-h' '--help')
_shtab_guv_yaml_qcm_option_strings=('-h' '--help')
_shtab_guv_zoom_breakout_rooms_option_strings=('-h' '--help')

_shtab_guv_xls_grade_book_group___marking_scheme_COMPGEN=_shtab_compgen_files
_shtab_guv_xls_grade_book_jury___config_COMPGEN=_shtab_compgen_files
_shtab_guv_xls_grade_book_no_group___marking_scheme_COMPGEN=_shtab_compgen_files

_shtab_guv_pos_0_choices='createsemester createuv doit cal_inst cal_uv csv_create_groups csv_exam_groups csv_for_upload csv_groups csv_groups_groupings csv_moodle_groups fetch_group_id html_inst html_table ical_inst json_group json_restriction maggle_teams pdf_attendance pdf_attendance_full pdf_trombinoscope xls_affectation xls_assignment_grade xls_grade_book_group xls_grade_book_jury xls_grade_book_no_group xls_merge_final_grade xls_utp yaml_qcm zoom_breakout_rooms'
_shtab_guv_json_restriction__c_choices='Cours TD TP'
_shtab_guv_json_restriction___course_choices='Cours TD TP'

_shtab_guv_pos_0_nargs=A...
_shtab_guv__h_nargs=0
_shtab_guv___help_nargs=0
_shtab_guv_createsemester__h_nargs=0
_shtab_guv_createsemester___help_nargs=0
_shtab_guv_createsemester___uv_nargs=*
_shtab_guv_createuv_pos_0_nargs=+
_shtab_guv_createuv__h_nargs=0
_shtab_guv_createuv___help_nargs=0
_shtab_guv_doit_pos_0_nargs=...
_shtab_guv_doit__h_nargs=0
_shtab_guv_doit___help_nargs=0
_shtab_guv_cal_inst__h_nargs=0
_shtab_guv_cal_inst___help_nargs=0
_shtab_guv_cal_inst__p_nargs=+
_shtab_guv_cal_inst___plannings_nargs=+
_shtab_guv_cal_inst__i_nargs=*
_shtab_guv_cal_inst___insts_nargs=*
_shtab_guv_cal_uv__h_nargs=0
_shtab_guv_cal_uv___help_nargs=0
_shtab_guv_csv_create_groups__h_nargs=0
_shtab_guv_csv_create_groups___help_nargs=0
_shtab_guv_csv_create_groups__p_nargs=+
_shtab_guv_csv_create_groups___proportions_nargs=+
_shtab_guv_csv_create_groups__l_nargs=+
_shtab_guv_csv_create_groups___names_nargs=+
_shtab_guv_csv_create_groups__o_nargs=0
_shtab_guv_csv_create_groups___ordered_nargs=0
_shtab_guv_csv_create_groups__g_nargs=0
_shtab_guv_csv_create_groups___global_nargs=0
_shtab_guv_csv_create_groups__r_nargs=0
_shtab_guv_csv_create_groups___random_nargs=0
_shtab_guv_csv_create_groups___other_groups_nargs=+
_shtab_guv_csv_exam_groups__h_nargs=0
_shtab_guv_csv_exam_groups___help_nargs=0
_shtab_guv_csv_for_upload__h_nargs=0
_shtab_guv_csv_for_upload___help_nargs=0
_shtab_guv_csv_for_upload___ects_nargs=0
_shtab_guv_csv_groups__h_nargs=0
_shtab_guv_csv_groups___help_nargs=0
_shtab_guv_csv_groups__g_nargs=+
_shtab_guv_csv_groups___groups_nargs=+
_shtab_guv_csv_groups_groupings__h_nargs=0
_shtab_guv_csv_groups_groupings___help_nargs=0
_shtab_guv_csv_moodle_groups__h_nargs=0
_shtab_guv_csv_moodle_groups___help_nargs=0
_shtab_guv_csv_moodle_groups__o_nargs=+
_shtab_guv_csv_moodle_groups___other_group_nargs=+
_shtab_guv_fetch_group_id_pos_0_nargs=+
_shtab_guv_fetch_group_id__h_nargs=0
_shtab_guv_fetch_group_id___help_nargs=0
_shtab_guv_html_inst__h_nargs=0
_shtab_guv_html_inst___help_nargs=0
_shtab_guv_html_table__h_nargs=0
_shtab_guv_html_table___help_nargs=0
_shtab_guv_html_table__c_nargs=*
_shtab_guv_html_table___courses_nargs=*
_shtab_guv_html_table__g_nargs=0
_shtab_guv_html_table___grouped_nargs=0
_shtab_guv_html_table__a_nargs=0
_shtab_guv_html_table___num_AB_nargs=0
_shtab_guv_html_table__n_nargs=+
_shtab_guv_html_table___names_nargs=+
_shtab_guv_ical_inst__h_nargs=0
_shtab_guv_ical_inst___help_nargs=0
_shtab_guv_ical_inst__p_nargs=+
_shtab_guv_ical_inst___plannings_nargs=+
_shtab_guv_ical_inst__i_nargs=+
_shtab_guv_ical_inst___insts_nargs=+
_shtab_guv_json_group__h_nargs=0
_shtab_guv_json_group___help_nargs=0
_shtab_guv_json_restriction__h_nargs=0
_shtab_guv_json_restriction___help_nargs=0
_shtab_guv_json_restriction__a_nargs=0
_shtab_guv_json_restriction___num_AB_nargs=0
_shtab_guv_maggle_teams__h_nargs=0
_shtab_guv_maggle_teams___help_nargs=0
_shtab_guv_pdf_attendance__h_nargs=0
_shtab_guv_pdf_attendance___help_nargs=0
_shtab_guv_pdf_attendance__b_nargs=0
_shtab_guv_pdf_attendance___blank_nargs=0
_shtab_guv_pdf_attendance__c_nargs=*
_shtab_guv_pdf_attendance___count_nargs=*
_shtab_guv_pdf_attendance__n_nargs=*
_shtab_guv_pdf_attendance___names_nargs=*
_shtab_guv_pdf_attendance___tiers_temps_nargs=0
_shtab_guv_pdf_attendance___save_tex_nargs=0
_shtab_guv_pdf_attendance_full__h_nargs=0
_shtab_guv_pdf_attendance_full___help_nargs=0
_shtab_guv_pdf_attendance_full___save_tex_nargs=0
_shtab_guv_pdf_trombinoscope__h_nargs=0
_shtab_guv_pdf_trombinoscope___help_nargs=0
_shtab_guv_pdf_trombinoscope___save_tex_nargs=0
_shtab_guv_xls_affectation__h_nargs=0
_shtab_guv_xls_affectation___help_nargs=0
_shtab_guv_xls_assignment_grade__h_nargs=0
_shtab_guv_xls_assignment_grade___help_nargs=0
_shtab_guv_xls_grade_book_group__h_nargs=0
_shtab_guv_xls_grade_book_group___help_nargs=0
_shtab_guv_xls_grade_book_jury__h_nargs=0
_shtab_guv_xls_grade_book_jury___help_nargs=0
_shtab_guv_xls_grade_book_no_group__h_nargs=0
_shtab_guv_xls_grade_book_no_group___help_nargs=0
_shtab_guv_xls_merge_final_grade__h_nargs=0
_shtab_guv_xls_merge_final_grade___help_nargs=0
_shtab_guv_xls_utp__h_nargs=0
_shtab_guv_xls_utp___help_nargs=0
_shtab_guv_yaml_qcm__h_nargs=0
_shtab_guv_yaml_qcm___help_nargs=0
_shtab_guv_zoom_breakout_rooms__h_nargs=0
_shtab_guv_zoom_breakout_rooms___help_nargs=0


# $1=COMP_WORDS[1]
_shtab_compgen_files() {
  compgen -f -- $1  # files
}

# $1=COMP_WORDS[1]
_shtab_compgen_dirs() {
  compgen -d -- $1  # recurse into subdirs
}

# $1=COMP_WORDS[1]
_shtab_replace_nonword() {
  echo "${1//[^[:word:]]/_}"
}

# set default values (called for the initial parser & any subparsers)
_set_parser_defaults() {
  local subparsers_var="${prefix}_subparsers[@]"
  subparsers=${!subparsers_var}

  local current_option_strings_var="${prefix}_option_strings[@]"
  current_option_strings=${!current_option_strings_var}

  completed_positional_actions=0

  _set_new_action "pos_${completed_positional_actions}" true
}

# $1=action identifier
# $2=positional action (bool)
# set all identifiers for an action's parameters
_set_new_action() {
  current_action="${prefix}_$(_shtab_replace_nonword $1)"

  local current_action_compgen_var=${current_action}_COMPGEN
  current_action_compgen="${!current_action_compgen_var}"

  local current_action_choices_var="${current_action}_choices"
  current_action_choices="${!current_action_choices_var}"

  local current_action_nargs_var="${current_action}_nargs"
  if [ -n "${!current_action_nargs_var}" ]; then
    current_action_nargs="${!current_action_nargs_var}"
  else
    current_action_nargs=1
  fi

  current_action_args_start_index=$(( $word_index + 1 ))

  current_action_is_positional=$2
}

# Notes:
# `COMPREPLY`: what will be rendered after completion is triggered
# `completing_word`: currently typed word to generate completions for
# `${!var}`: evaluates the content of `var` and expand its content as a variable
#     hello="world"
#     x="hello"
#     ${!x} -> ${hello} -> "world"
_shtab_guv() {
  local completing_word="${COMP_WORDS[COMP_CWORD]}"
  COMPREPLY=()

  prefix=_shtab_guv
  word_index=0
  _set_parser_defaults
  word_index=1

  # determine what arguments are appropriate for the current state
  # of the arg parser
  while [ $word_index -ne $COMP_CWORD ]; do
    local this_word="${COMP_WORDS[$word_index]}"

    if [[ -n $subparsers && " ${subparsers[@]} " =~ " ${this_word} " ]]; then
      # valid subcommand: add it to the prefix & reset the current action
      prefix="${prefix}_$(_shtab_replace_nonword $this_word)"
      _set_parser_defaults
    fi

    if [[ " ${current_option_strings[@]} " =~ " ${this_word} " ]]; then
      # a new action should be acquired (due to recognised option string or
      # no more input expected from current action);
      # the next positional action can fill in here
      _set_new_action $this_word false
    fi

    if [[ "$current_action_nargs" != "*" ]] && \
       [[ "$current_action_nargs" != "+" ]] && \
       [[ "$current_action_nargs" != *"..." ]] && \
       (( $word_index + 1 - $current_action_args_start_index >= \
          $current_action_nargs )); then
      $current_action_is_positional && let "completed_positional_actions += 1"
      _set_new_action "pos_${completed_positional_actions}" true
    fi

    let "word_index+=1"
  done

  # Generate the completions

  if [[ "${completing_word}" == -* ]]; then
    # optional argument started: use option strings
    COMPREPLY=( $(compgen -W "${current_option_strings[*]}" -- "${completing_word}") )
  else
    # use choices & compgen
    COMPREPLY=( $(compgen -W "${current_action_choices}" -- "${completing_word}"; \
                  [ -n "${current_action_compgen}" ] \
                  && "${current_action_compgen}" "${completing_word}") )
  fi

  return 0
}

complete -o filenames -F _shtab_guv guv
